<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title>Resume</title>
  <style>
    /* Defines print safe whitespace */
    @page {
      size: A4;
      margin: 18mm 16mm;
    }

    html,
    body {
      margin: 0;
      padding: 0;
    }

    body {
      /* Using a common sans-serif font stack for better compatibility */
      font: 11pt 'Helvetica Neue', Helvetica, Arial, sans-serif;
      color: #000000;
      /* Dark grey for softer text */
      background: #ffffff;
      line-height: 1.4;
    }

    /* --- General & Helpers --- */
    h1,
    h2,
    h3 {
      page-break-after: avoid;
      font-weight: normal;
      margin: 0;
    }

    a {
      color: #007bff;
      text-decoration: none;
    }

    ul {
      padding-left: 20px;
      margin-top: 8px;
      margin-bottom: 1em;
    }

    li {
      margin-bottom: 5px;
    }

    .container {
      max-width: 760px;
      margin: 0 auto;
    }

    .header {
      text-align: center;
      margin-bottom: 8px;
    }

    .header h1 {
      font-size: 32pt;
      font-weight: bold;
      margin-bottom: -8px;
    }

    .header .contact-info {
      font-size: 11pt;
      color: #555;
    }

    .section h2 {
      font-size: 14pt;
      font-weight: bold;
      padding-bottom: 4px;
      border-bottom: 6px double #000000;
      margin-bottom: 2px;
    }

    .subsection {
      margin-bottom: 4px;
    }

    .subsection-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
    }

    .subsection-header h3 {
      font-size: 12pt;
      font-weight: bold;
    }

    .subsection-header .date {
      font-size: 11pt;
      color: #000000;
      font-style: italic;
    }
  </style>

  {% macro section(title) -%}
  <div class="section">
    <h2>{{ title }}</h2>
    {{ caller() }}
  </div>
  {%- endmacro %}

  {% macro bullet(text) -%}
  <li>{{ text }}</li>
  {%- endmacro %}
</head>

<body>
  <div class="container">
    <div class="header">
      <h1>{{ ctx.full_name }}</h1>
      <p class="contact-info">
        {{ ctx.phone }} | {{ ctx.email }}
        {% if ctx.website %}| <a href="{{ ctx.website }}">{{ ctx.website }}</a>{% endif %}
      </p>
    </div>

    {% if ctx.skills %}
    {% call section('Skills') %}
    <ul>
      {% for skill in ctx.skills %}
      {{ bullet(skill) }}
      {% endfor %}
    </ul>
    {% endcall %}
    {% endif %}

    {% if ctx.work_experience %}
    {% call section('Work Experience') %}
    {% for exp in ctx.work_experience %}
    <div class="subsection">
      <div class="subsection-header">
        <h3>{{ exp.company }}, {{ exp.title }}</h3>
        <p class="date">{{ exp.start_date.strftime('%b %Y') }} - {% if exp.end_date %}{{ exp.end_date.strftime('%b %Y')
          }}{% else %}Present{% endif %}</p>
      </div>
      <ul>
        {% for bullet_text in exp.bullets %}
        {{ bullet(bullet_text) }}
        {% endfor %}
      </ul>
    </div>
    {% endfor %}
    {% endcall %}
    {% endif %}

    {% if ctx.projects %}
    {% call section('Projects') %}
    {% for proj in ctx.projects %}
    <div class="subsection">
      <div class="subsection-header">
        <h3>{{ proj.company }}, {{ proj.title }}</h3>
        <p class="date">{{ proj.start_date.strftime('%b %Y') }} - {% if proj.end_date %}{{ proj.end_date.strftime('%b
          %Y') }}{% else %}Present{% endif %}</p>
      </div>
      <ul>
        {% for bullet_text in proj.bullets %}
        {{ bullet(bullet_text) }}
        {% endfor %}
      </ul>
    </div>
    {% endfor %}
    {% endcall %}
    {% endif %}

    {% if ctx.education %}
    {% call section('Education') %}
    {% for edu in ctx.education %}
    <div class="subsection">
      <div class="subsection-header">
        <h3>{{ edu.institution }}, {{ edu.program }}</h3>
        <p class="date">{{ edu.start_date.strftime('%b %Y') }} - {% if edu.end_date %}{{ edu.end_date.strftime('%b %Y')
          }}{% else %}Present{% endif %}</p>
      </div>
      <ul>
        {% for bullet_text in edu.bullets %}
        {{ bullet(bullet_text) }}
        {% endfor %}
      </ul>
    </div>
    {% endfor %}
    {% endcall %}
    {% endif %}

    {% if ctx.awards %}
    {% call section('Awards') %}
    <ul>
      {% for award in ctx.awards %}
      {{ bullet(award) }}
      {% endfor %}
    </ul>
    {% endcall %}
    {% endif %}
  </div>
</body>

</html>